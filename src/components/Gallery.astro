---
import { getCollection } from "astro:content";

const pieces = (await getCollection("portfolio")).sort((a, b) => {
  const orderA = a.data.order ?? 999;
  const orderB = b.data.order ?? 999;
  return orderA - orderB;
});
---
<section class="section" id="work">
  <div class="container">
    <div class="portfolio-grid">
      {pieces.map((piece) => (
        <a class="portfolio-card" href={`/portfolio/${piece.slug}/`}>
          <img src={piece.data.cover} alt={piece.data.title} loading="lazy" />
          <div class="info">
            <h3>{piece.data.title}</h3>
            <p>{piece.data.summary}</p>
          </div>
        </a>
      ))}
    </div>
  </div>
</section>
